{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, re, subprocess, json\ntry:\n    d = json.load(sys.stdin)\n    output = str(d)\nexcept:\n    output = sys.stdin.read()\n# Only trigger on explicit orchestrate done commands or update-baserow success messages\n# Pattern: 'orchestrate.js done S1-UPLOAD-001' or '\\u2713 S1-UPLOAD-001 \\u2192 Done'\norchestrate_done = re.findall(r'orchestrate\\.js\\s+done\\s+(S[0-4]-[A-Z]+-\\d{3})', output)\nupdate_success = re.findall(r'\\u2713\\s+(S[0-4]-[A-Z]+-\\d{3})\\s*\\u2192\\s*Done', output)\nfor tid in set(orchestrate_done + update_success):\n    subprocess.run(['/Users/ianvincent/workspace/hudo-2026/scripts/update-baserow-task.sh', tid, 'Done'], capture_output=True)\n\" 2>/dev/null || true"
          }
        ]
      }
    ]
  }
}
